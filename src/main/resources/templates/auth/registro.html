<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Registro de Usuario</title>
    <link th:href="@{/css/bootstrap/bootstrap.css}" rel="stylesheet" />
    <script th:src="@{/js/bootstrap/bootstrap.bundle.js}" type="text/javascript"></script>
    <style>
        body, html {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .form-container {
            width: 100%;
            max-width: 400px;
        }
    </style>
</head>
<body>
<div class="form-container">
    <h2 class="text-center text-bg-dark p-3">REGISTRO DE USUARIO</h2>
    <!-- Mensaje de alerta -->
    <div th:if="${mensaje}" th:text="${mensaje}" class="alert alert-danger" role="alert"></div>
    <form class="needs-validation" th:action="@{/auth/registro}" th:object="${usuario}" method="post" id="registroForm" novalidate>
        <!-- Campos de formulario -->
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nombres" th:field="*{nombres}" placeholder="Nombres" required>
            <label for="nombres">Nombres</label>
            <div class="invalid-feedback">Por favor ingrese su nombre.</div>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="apellidos" th:field="*{apellidos}" placeholder="Apellidos" required>
            <label for="apellidos">Apellidos</label>
            <div class="invalid-feedback">Por favor ingrese sus apellidos.</div>
        </div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" th:field="*{email}" placeholder="Email" required>
            <label for="email">Email</label>
            <div class="invalid-feedback">Por favor ingrese un correo electrónico válido.</div>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nomusuario" th:field="*{nomusuario}" placeholder="Usuario" required>
            <label for="nomusuario">Usuario</label>
            <div class="invalid-feedback">Por favor ingrese un nombre de usuario.</div>
        </div>
        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="password" th:field="*{password}" placeholder="Contraseña" minlength="4">
            <label for="password">Contraseña</label>
            <div class="invalid-feedback">La contraseña debe tener al menos 4 caracteres.</div>
        </div>
        <div class="d-flex justify-content-between">
            <a th:href="@{/auth/login}" class="btn btn-secondary">REGRESAR A LOGIN</a>
            <button type="submit" class="btn btn-primary" id="guardarBtn">GUARDAR</button>
        </div>
    </form>
</div>

<script>
    // Limpiar los campos del formulario si el registro es exitoso
    var mensajeAlerta = document.querySelector('.alert');
    if (mensajeAlerta.innerText === 'Usuario registrado correctamente') {
        document.getElementById('registroForm').reset();
        setTimeout(function(){
            mensajeAlerta.style.display = 'none';
        }, 3000); // Ocultar el mensaje después de 3 segundos
    }
</script>
</body>
</html>
